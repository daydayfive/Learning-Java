[TOC]


# Cookies 和 Session

## Cookies
HTTP 协议是无状态的， 主要是为了让HTTP 协议 尽可能简单，使得它能够处理大量事务。 HTTP /1.1 引入Cookie 来保存状态信息。


Cookie 是**服务器发送到用户浏览器并保存在本地的一小块数据**，它会在浏览器之后向同一服务器再次发起请求时被携带上，用于告知服务端两个请求是否来自同一浏览器。由于之后每次请求都会需要携带Cookie数据，因此会带来额外的性能开销（尤其是在移动环境下）。


用途
* 会话状态管理（如用户登录状态，购物车，游戏分数或其他需要记录的信息）
* 个性化设置(如用户自定义设置，主题等)
* 浏览器行为跟踪（如跟踪分析用户行为等）



## Session
除了可以将用户信息通过Cookie存储在用户浏览器中，也可以利用Session 存储在服务器端，存储在服务器端的信息更加安全。


Session 可以存储在服务器上的文件，数据库或者内存中。也可以将Session 存储在redis 这种内存型数据库中，效率会更高。


## Cookies 和 Session的选择
* Cookie 只能存储ASCII 码字符串，而Session可以存储任何类型的数据，因此在考虑数据复杂性时首选Session
* Cookie 存储在浏览器中，容易被恶意查看。如果非要将一些隐私数据存在Cookie中，可以将Cookie 值进行加密，然后在服务器进行解密；
* 对大型网站，如果用户所有的信息都存储在Session中，那么开销时非常大的，因此不建议将所有的信息存储在Session中。



