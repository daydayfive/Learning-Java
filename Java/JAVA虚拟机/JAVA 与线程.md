# JAVA 与线程

## 线程的实现

* 实现方式有三种

* 使用内核线程实现
* 使用用户线程实现
  * 用户线程（User Thread,UT）的创建，销毁和调度都在用户态完成
  * 进程和用户线程之间的关系为1:N
  * Java现在并不支持这玩意
* 使用用户线程加轻量级线程混合实现



## Java线程的调度

* 协同式线程调度

  ​	线程的执行时间由线程本身来控制，线程把自己的工作执行完了之后，要主动通知系统切换到另外一个线程上。

  ​	实现简单，没有什么线程同步问题

* 抢占式线程调度

  * 每个线程由系统分配执行时间
  * 可以设置线程优先级





* 状态转换

  * 新建（New）:创建后尚未启动的线程处于这种状态
  * 运行（Runable）：Runable包括了操作系统线程状态中的Running 和Ready，也就是处于此状态的线程有可能正在执行，也有可能正在等待着CPU为它分配执行时间。
  * 无限期等待（Waiting）：处于这种状态的线程不会被分配CPU执行时间，它们要等待被其他线程显式的唤醒。
  * 限期等待（Timed Waiting）：处于这种状态的线程也不会被分配CPU执行事件，不过无需等待被其他线程显式地唤醒，在一定时间之后它们会有系统自动的唤醒、
  * 阻塞（Blocked）：线程被阻塞了，“阻塞状态”与“等待状态”的区别是：“阻塞状态”在等待着获取到一个排他锁，这个事件将在另外一个线程放弃这个锁的时候发生
  * 结束（Terminated）:已终止线程的线程状态，线程已经结束执行

  

![image.png](https://cdn.nlark.com/yuque/0/2020/png/1266758/1587092733266-cacc335c-d8c3-442c-b298-1ca052550ed2.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_10%2Ctext_THVrYQ%3D%3D%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10)