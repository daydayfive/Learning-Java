[toc]
# Mysql 添加索引及索引的优缺点

## 一. 什么是索引？

索引是对数据库表中的一列或多列值进行排序的一种结构，使用索引可以快速访问数据库表中的特定信息。


## 二.索引的作用？
索引相当于图书上的目录，可以根据目录上的页码快速找到所需的内容，提高性能（查询速度）

## 三. 优点：
1. 通过创建唯一性索引，可以保证数据库表的每一行数据的唯一性。
2. 可以加快数据的检索速度
3. 可以加速表与表之间的连接
4. 在使用分组和排序进行检索的时候，可以减少查询中分组和排序的时间。


## 四.缺点：
1. 创建索引和维护索引需要耗费时间，这种时间随着数据量的增加而增加。
2. 索引需要占用物理空间，数据量越大，占用空间越大
3. 会降低表的增删改的效率，因为每次增删改索引，都需要进行动态维护。


## 五. 什么时候需要创建索引
1. 主键自动创建唯一索引
2. 频繁作为查询条件的字段应该创建索引
3. 查询中排序的字段创建索引将大大提高排序的速度
4. 查询中统计或者分组的字段


## 六. 什么时候不需要创建索引

1.  频繁更新的字段不适合创建索引，因为每次更新不单单是创建记录，还会更新索引，保存索引文件
2.  where 条件里用不到的字段，不创建索引
3.  表记录太小，不需要创建索引
4.  经常增删改的表
5.  数据重复且分布均匀的字段，因此为经常查询的和经常排序的字段建立索引。注意某些数据包含大量重复数据，因此建立索引就没有太大的效果


## 七. 索引的分类
1. 普通索引：最基本的索引，没有任何限制
2. 唯一索引：索引列的值必须唯一，且不能为空
3. 主键索引：特殊的索引，唯一的标识一条记录，不能为空
4. 联合索引：在多个字段上建立索引，能够加速查询到速度


## 八. 索引和sql语句的优化
1. 前导模糊查询不能使用索引
如  name like '%静'
2. Union，in,or 可以命中索引，建议使用in
3. 负条件查询不能使用索引，可以优化为in 查询，
其中负条件有!=  , <>,  not in, not exists,  not like
4. 联合索引最左前缀原则，又叫最左侧查询
如果在(a,b,c)三个字段上建立联合索引， 那么能够加快  a|(a,b)|(a,b,c) 三组的查询速度
5. 建立联合查询时，区分度最高的字段在最左边
6. 如果建立了（a,b）联合索引，就不必再单独建立a索引
7. 存在非等号和等号混合判断条件时，在建索引时，要把等号条件的列前置
8. 范围列可以用到索引，但是范围列后面的列无法用到索引。
索引最多用于一个范围列，如果查询条件中有两个范围列则无法全用到索引。范围条件有
9. 把计算放到业务层而不是数据库层
10. 强制类型转换会全表扫描，
如果phone字段是varchar类型，则下面的sql不能命中索引。select * from user where phone =1380001234
11. 利用覆盖索引来进行范围查询，避免回表
    
12. 建立索引的列不能为null，使用not null 约束及默认值
13. 超过三个表不能用join
14. 如果查询只需要一条，limit 1能够提高效率，比如验证登录的时候。
15. 如果排序字段没有索引，尽量少排序